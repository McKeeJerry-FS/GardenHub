@model GardenHub.Models.Garden

@{
    ViewData["Title"] = "Garden Details";
}

<div class="garden-dashboard-fixed-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="display-4 mb-0"><i class="bi bi-house-door"></i> @Model.GardenName</h1>
        <div class="d-flex gap-2">
            <a asp-action="Dashboard" asp-route-id="@Model.GardenId" class="btn btn-info">
                <i class="bi bi-speedometer2"></i> View Dashboard
            </a>
            <a asp-action="Edit" asp-route-id="@Model?.GardenId" class="btn btn-warning">
                <i class="bi bi-pencil"></i> Edit Garden
            </a>
            <a asp-action="Index" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Back to List
            </a>
        </div>
    </div>

    <!-- Garden Overview Card -->
    <div class="card mb-4 shadow">
        <div class="card-header bg-primary text-white">
            <h3 class="mb-0"><i class="bi bi-info-circle"></i> Garden Overview</h3>
        </div>
        <div class="card-body">
            <div class="garden-overview-layout">
                <div class="garden-overview-image">
                    @if (ViewData["GardenImage"] != null && !string.IsNullOrEmpty(ViewData["GardenImage"]!.ToString()))
                    {
                        <img src="@ViewData["GardenImage"]" alt="@Model.GardenName" class="img-fluid rounded shadow-sm" style="max-height: 400px; object-fit: cover; width: 100%;" />
                    }
                    else
                    {
                        <div class="text-center p-5 bg-light rounded">
                            <i class="bi bi-house-door text-muted" style="font-size: 5rem;"></i>
                            <p class="text-muted mt-2">No image available</p>
                        </div>
                    }
                </div>
                <div class="garden-overview-details">
                    <dl class="row mb-0">
                        <dt class="col-sm-4">Garden Name:</dt>
                        <dd class="col-sm-8">
                            <h4 class="mb-0">@Html.DisplayFor(model => model.GardenName)</h4>
                        </dd>

                        <dt class="col-sm-4">Description:</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.GardenDescription)</dd>

                        <dt class="col-sm-4">Location:</dt>
                        <dd class="col-sm-8">
                            <span class="badge bg-info fs-6">
                                <i class="bi bi-geo-alt"></i> @Html.DisplayFor(model => model.GardenLocation)
                            </span>
                        </dd>

                        <dt class="col-sm-4">Garden Type:</dt>
                        <dd class="col-sm-8">
                            <span class="badge bg-success fs-6">@Html.DisplayFor(model => model.Type)</span>
                        </dd>

                        <dt class="col-sm-4">Grow Method:</dt>
                        <dd class="col-sm-8">
                            <span class="badge bg-primary fs-6">
                                <i class="bi bi-droplet"></i> @Html.DisplayFor(model => model.GardenGrowMethod)
                            </span>
                        </dd>

                        <dt class="col-sm-4">Start Date:</dt>
                        <dd class="col-sm-8">
                            <i class="bi bi-calendar-check"></i> @Html.DisplayFor(model => model.StartDate)
                        </dd>

                        <dt class="col-sm-4">End Date:</dt>
                        <dd class="col-sm-8">
                            <i class="bi bi-calendar-x"></i> @Html.DisplayFor(model => model.EndDate)
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Garden Statistics Card -->
    <div class="card mb-4 shadow">
        <div class="card-header bg-success text-white">
            <h3 class="mb-0"><i class="bi bi-graph-up"></i> Garden Statistics</h3>
        </div>
        <div class="card-body">
            <div class="garden-stats-row">
                <div class="garden-stat-card">
                    <div class="card bg-light shadow-sm h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-flower3 text-success" style="font-size: 3rem;"></i>
                            <h3 class="display-6 mt-3 mb-2">@Model.Plants.Count</h3>
                            <p class="text-muted mb-0">Total Plants</p>
                        </div>
                    </div>
                </div>

                <div class="garden-stat-card">
                    <div class="card bg-light shadow-sm h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-clipboard-data text-info" style="font-size: 3rem;"></i>
                            <h3 class="display-6 mt-3 mb-2">@Model.DailyRecords.Count</h3>
                            <p class="text-muted mb-0">Daily Records</p>
                        </div>
                    </div>
                </div>

                <div class="garden-stat-card">
                    <div class="card bg-light shadow-sm h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-journal-text text-warning" style="font-size: 3rem;"></i>
                            <h3 class="display-6 mt-3 mb-2">@Model.JournalEntries.Count</h3>
                            <p class="text-muted mb-0">Journal Entries</p>
                        </div>
                    </div>
                </div>

                <div class="garden-stat-card">
                    <div class="card bg-light shadow-sm h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-tools text-danger" style="font-size: 3rem;"></i>
                            <h3 class="display-6 mt-3 mb-2">@Model.Equipments.Count</h3>
                            <p class="text-muted mb-0">Equipment</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Garden Timeline Card -->
    <div class="card mb-4 shadow">
        <div class="card-header bg-info text-white">
            <h3 class="mb-0"><i class="bi bi-calendar-range"></i> Garden Timeline</h3>
        </div>
        <div class="card-body">
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card bg-light h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-calendar-check text-success" style="font-size: 2.5rem;"></i>
                            <h5 class="mt-3 mb-2">Started</h5>
                            <p class="fs-5 mb-1">@Model.StartDate.ToString("MMM dd, yyyy")</p>
                            <small class="text-muted">@((DateTime.UtcNow - Model.StartDate).Days) days ago</small>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card bg-light h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-hourglass-split text-primary" style="font-size: 2.5rem;"></i>
                            <h5 class="mt-3 mb-2">Duration</h5>
                            <p class="fs-5 mb-1">@((Model.EndDate - Model.StartDate).Days) days</p>
                            <small class="text-muted">Total planned period</small>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card bg-light h-100">
                        <div class="card-body text-center">
                            <i class="bi bi-calendar-x text-danger" style="font-size: 2.5rem;"></i>
                            <h5 class="mt-3 mb-2">Ends</h5>
                            <p class="fs-5 mb-1">@Model.EndDate.ToString("MMM dd, yyyy")</p>
                            <small class="text-muted">@((Model.EndDate - DateTime.UtcNow).Days) days remaining</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions Card -->
    <div class="card shadow">
        <div class="card-header bg-dark text-white">
            <h3 class="mb-0"><i class="bi bi-lightning-charge"></i> Quick Actions</h3>
        </div>
        <div class="card-body">
            <div class="d-flex gap-2 flex-wrap justify-content-center">
                <a asp-action="Dashboard" asp-route-id="@Model.GardenId" class="btn btn-info">
                    <i class="bi bi-speedometer2"></i> View Full Dashboard
                </a>
                <a asp-action="Edit" asp-route-id="@Model?.GardenId" class="btn btn-warning">
                    <i class="bi bi-pencil"></i> Edit Garden
                </a>
                <a asp-controller="Plants" asp-action="Create" asp-route-gardenId="@Model.GardenId" class="btn btn-success">
                    <i class="bi bi-flower3"></i> Add Plant
                </a>
                <a asp-controller="DailyRecords" asp-action="Create" asp-route-gardenId="@Model.GardenId" class="btn btn-primary">
                    <i class="bi bi-clipboard-plus"></i> Add Daily Record
                </a>
                <a asp-controller="JournalEntries" asp-action="Create" asp-route-gardenId="@Model.GardenId" class="btn btn-secondary">
                    <i class="bi bi-journal-plus"></i> Add Journal Entry
                </a>
                <a asp-controller="Equipments" asp-action="Create" asp-route-gardenId="@Model.GardenId" class="btn btn-danger">
                    <i class="bi bi-tools"></i> Add Equipment
                </a>
                <a asp-action="Index" class="btn btn-outline-secondary">
                    <i class="bi bi-list-ul"></i> View All Gardens
                </a>
            </div>
        </div>
    </div>
</div>
