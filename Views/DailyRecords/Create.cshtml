@model GardenHub.Models.DailyRecord

@{
    ViewData["Title"] = "Create Daily Record";
}

<div class="garden-dashboard-fixed-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="display-4 mb-0"><i class="bi bi-plus-circle"></i> Add Daily Record</h1>
        <div class="d-flex gap-2">
            <a asp-action="Index" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Back to List
            </a>
        </div>
    </div>

    <form asp-action="Create">
        <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

        <!-- Record Information Card -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-info text-white">
                <h3 class="mb-0"><i class="bi bi-calendar3"></i> Record Information</h3>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select asp-for="GardenId" class="form-select" asp-items="ViewBag.GardenId" id="gardenId">
                                <option value="">-- Select Garden --</option>
                            </select>
                            <label asp-for="GardenId" for="gardenId">
                                <i class="bi bi-house-door"></i> Select Garden
                            </label>
                            <span asp-validation-for="GardenId" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="CreatedDate" type="datetime-local" class="form-control" id="createdDate" />
                            <label asp-for="CreatedDate" for="createdDate">
                                <i class="bi bi-clock"></i> Record Date & Time
                            </label>
                            <span asp-validation-for="CreatedDate" class="text-danger small"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Temperature & Humidity Card -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0"><i class="bi bi-thermometer-half"></i> Temperature & Humidity</h3>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <div class="col-12">
                        <h5 class="border-bottom pb-2 mb-3"><i class="bi bi-house-door"></i> Inside Conditions</h5>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="InsideTemperature" type="number" step="0.1" class="form-control" id="insideTemp" placeholder="Inside Temperature" />
                            <label asp-for="InsideTemperature" for="insideTemp">
                                <i class="bi bi-thermometer"></i> Inside Temperature (°F)
                            </label>
                            <span asp-validation-for="InsideTemperature" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="InsideHumidity" type="number" step="0.1" class="form-control" id="insideHumidity" placeholder="Inside Humidity" />
                            <label asp-for="InsideHumidity" for="insideHumidity">
                                <i class="bi bi-droplet"></i> Inside Humidity (%)
                            </label>
                            <span asp-validation-for="InsideHumidity" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-12">
                        <h5 class="border-bottom pb-2 mb-3 mt-3"><i class="bi bi-cloud-sun"></i> Outside Conditions</h5>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="OutsideTemperature" type="number" step="0.1" class="form-control" id="outsideTemp" placeholder="Outside Temperature" />
                            <label asp-for="OutsideTemperature" for="outsideTemp">
                                <i class="bi bi-thermometer"></i> Outside Temperature (°F)
                            </label>
                            <span asp-validation-for="OutsideTemperature" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="OutsideHumidity" type="number" step="0.1" class="form-control" id="outsideHumidity" placeholder="Outside Humidity" />
                            <label asp-for="OutsideHumidity" for="outsideHumidity">
                                <i class="bi bi-droplet"></i> Outside Humidity (%)
                            </label>
                            <span asp-validation-for="OutsideHumidity" class="text-danger small"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VPD Card -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-success text-white">
                <h3 class="mb-0"><i class="bi bi-activity"></i> Vapor Pressure Deficit (VPD)</h3>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="InsideVPD" type="number" step="0.01" class="form-control" id="insideVPD" placeholder="Inside VPD" />
                            <label asp-for="InsideVPD" for="insideVPD">
                                <i class="bi bi-house"></i> Inside VPD (kPa)
                            </label>
                            <span asp-validation-for="InsideVPD" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="OutsideVPD" type="number" step="0.01" class="form-control" id="outsideVPD" placeholder="Outside VPD" />
                            <label asp-for="OutsideVPD" for="outsideVPD">
                                <i class="bi bi-cloud"></i> Outside VPD (kPa)
                            </label>
                            <span asp-validation-for="OutsideVPD" class="text-danger small"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lighting Card -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-warning text-dark">
                <h3 class="mb-0"><i class="bi bi-brightness-high"></i> Lighting Information</h3>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input asp-for="LightingOn" type="time" class="form-control" id="lightingOn" />
                            <label asp-for="LightingOn" for="lightingOn">
                                <i class="bi bi-sunrise"></i> Lights On Time
                            </label>
                            <span asp-validation-for="LightingOn" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-floating">
                            <input asp-for="LightingOff" type="time" class="form-control" id="lightingOff" />
                            <label asp-for="LightingOff" for="lightingOff">
                                <i class="bi bi-sunset"></i> Lights Off Time
                            </label>
                            <span asp-validation-for="LightingOff" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-floating">
                            <input asp-for="LightingIntensity" type="number" step="1" class="form-control" id="lightingIntensity" placeholder="Lighting Intensity" />
                            <label asp-for="LightingIntensity" for="lightingIntensity">
                                <i class="bi bi-brightness-high-fill"></i> Intensity (%)
                            </label>
                            <span asp-validation-for="LightingIntensity" class="text-danger small"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Water & Nutrients Card -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-info text-white">
                <h3 class="mb-0"><i class="bi bi-droplet-fill"></i> Water & Nutrients</h3>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="WaterAmount" class="form-control" id="waterAmount" placeholder="Water Amount" />
                            <label asp-for="WaterAmount" for="waterAmount">
                                <i class="bi bi-droplet"></i> Water Amount
                            </label>
                            <span asp-validation-for="WaterAmount" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="NutrientAmount" class="form-control" id="nutrientAmount" placeholder="Nutrient Amount" />
                            <label asp-for="NutrientAmount" for="nutrientAmount">
                                <i class="bi bi-moisture"></i> Nutrient Amount
                            </label>
                            <span asp-validation-for="NutrientAmount" class="text-danger small"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Card -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-secondary text-white">
                <h3 class="mb-0"><i class="bi bi-sticky"></i> Notes</h3>
            </div>
            <div class="card-body">
                <div class="form-floating">
                    <textarea asp-for="Notes" class="form-control" id="notes" placeholder="Notes" style="height: 120px"></textarea>
                    <label asp-for="Notes" for="notes">
                        <i class="bi bi-card-text"></i> Additional Notes
                    </label>
                    <span asp-validation-for="Notes" class="text-danger small"></span>
                </div>
            </div>
        </div>

        <!-- Action Buttons Card -->
        <div class="card shadow">
            <div class="card-body">
                <div class="d-flex gap-2 justify-content-center flex-wrap">
                    <button type="submit" class="btn btn-success btn-lg">
                        <i class="bi bi-check-circle"></i> Create Record
                    </button>
                    <button type="reset" class="btn btn-warning btn-lg">
                        <i class="bi bi-arrow-clockwise"></i> Reset Form
                    </button>
                    <a asp-action="Index" class="btn btn-secondary btn-lg">
                        <i class="bi bi-x-circle"></i> Cancel
                    </a>
                </div>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    
    <script>
        // Set default date and time to now
        document.addEventListener('DOMContentLoaded', function() {
            const createdDate = document.getElementById('createdDate');
            if (!createdDate.value) {
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                createdDate.value = `${year}-${month}-${day}T${hours}:${minutes}`;
            }
        });
    </script>
}
